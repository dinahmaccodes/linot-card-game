(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},2551,e=>{"use strict";var t=e.i(71645);let a=`
  query {
    matchState {
      players {
        nickname
        handSize
        calledLastCard
      }
      currentPlayerIndex
      status
      deckSize
      discardPile {
        suit
        value
      }
    }
  }
`,l=`
  query {
    myHand {
      suit
      value
    }
  }
`;function n(){let[n,r]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(null),[m,h]=(0,t.useState)(1);(0,t.useEffect)(()=>{e.A(29530).then(({createLineraClient:e,getGlobalConfig:t})=>{try{let a=t();h(a.playerNumber||1);let l=e();u(l)}catch(e){console.error("Config not ready yet",e)}})},[]);let x=(0,t.useCallback)(async()=>{if(d)try{let t=await e.A(29530).then(e=>e.getGlobalConfig()),n=await d.query(a,{},t.endpoints[0].chainId),s=await d.query(l,{},t.endpoints[0].chainId);if(n.matchState){let e={myCards:s.myHand||[],myCardCount:s.myHand?.length||0,calledLastCard:!1,opponents:n.matchState.players.filter((e,t)=>e&&t!==m-1).map(e=>({owner:"",nickname:e.nickname,cardCount:e.handSize,isActive:!0,calledLastCard:e.calledLastCard||!1})),topCard:n.matchState.discardPile[n.matchState.discardPile.length-1],deckSize:n.matchState.deckSize,currentPlayerIndex:n.matchState.currentPlayerIndex,status:n.matchState.status,activeShapeDemand:null,pendingPenalty:0};r(e)}c(null)}catch(e){console.error("Failed to fetch game state:",e),c(e)}finally{i(!1)}},[d,m]);(0,t.useEffect)(()=>{if(!d)return;x();let e=setInterval(x,500);return()=>clearInterval(e)},[x,d]);let p=(0,t.useCallback)(async(t,a=3)=>{if(d)for(let l=0;l<a;l++)try{let a=await e.A(29530).then(e=>e.getGlobalConfig());await d.mutate(`
            mutation JoinGame($playChainId: String!, $nickname: String!) {
              joinMatch(playChainId: $playChainId, nickname: $nickname)
            }
          `,{playChainId:a.playChain,nickname:t},a.endpoints[0].chainId),await x();return}catch(t){if(console.error(`Join attempt ${l+1}/${a} failed:`,t),l===a-1)throw t;let e=1e3*Math.pow(2,l);console.log(`Retrying in ${e}ms...`),await new Promise(t=>setTimeout(t,e))}},[d,x]),g=(0,t.useCallback)(async()=>{if(d)try{let t=await e.A(29530).then(e=>e.getGlobalConfig());await d.mutate("mutation { startMatch }",{},t.endpoints[0].chainId),await x()}catch(e){throw console.error("Failed to start game:",e),e}},[d,x]),y=(0,t.useCallback)(async(t,a)=>{if(d)try{let l=await e.A(29530).then(e=>e.getGlobalConfig());await d.mutate(`
        mutation PlayCard($cardIndex: Int!, $chosenSuit: String) {
          playCard(cardIndex: $cardIndex, chosenSuit: $chosenSuit)
        }
      `,{cardIndex:t,chosenSuit:a},l.endpoints[0].chainId),await x()}catch(e){throw console.error("Failed to play card:",e),e}},[d,x]);return{gameState:n,loading:s,error:o,joinGame:p,startGame:g,playCard:y,drawCard:(0,t.useCallback)(async()=>{if(d)try{let t=await e.A(29530).then(e=>e.getGlobalConfig());await d.mutate("mutation { drawCard }",{},t.endpoints[0].chainId),await x()}catch(e){throw console.error("Failed to draw card:",e),e}},[d,x]),callLastCard:(0,t.useCallback)(async()=>{if(d)try{let t=await e.A(29530).then(e=>e.getGlobalConfig());await d.mutate("mutation { callLastCard }",{},t.endpoints[0].chainId),await x()}catch(e){throw console.error("Failed to call last card:",e),e}},[d,x]),refresh:x,playerNumber:m}}e.s(["useWhotGame",()=>n])},72637,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(18566),n=e.i(2551);function r(){(0,l.useRouter)();let{joinGame:e,playerNumber:r}=(0,n.useWhotGame)(),[s,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),m=async()=>{if(!s.trim())return void u("Please enter a nickname");localStorage.clear(),c(!0),u(null);try{console.log(`Joining game as ${s}...`),await e(s.trim()),console.log("âœ“ Successfully joined game"),await new Promise(e=>setTimeout(e,1e3)),window.location.href=`/game/${r}`}catch(e){console.error("Failed to join:",e),u(e.message||"Failed to join game. Please try again."),c(!1)}};return(0,t.jsxs)("main",{className:"min-h-screen w-full relative overflow-hidden flex flex-col items-center justify-center",style:{background:"linear-gradient(180deg, #77F0FC 0%, #19D3F9 100%)"},children:[(0,t.jsx)("img",{src:"/water-bubbles.svg",className:"absolute z-3 top-0 left-[150px] animate-bubbles animation-delay-2000",alt:""}),(0,t.jsx)("img",{src:"/sea-walls.png",className:"absolute z-3 top-0 left-0",alt:""}),(0,t.jsx)("img",{src:"/reflection-lights.svg",className:"absolute z-3 top-0 left-0 animate-shimmer",alt:""}),(0,t.jsxs)("div",{className:"relative z-20 bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4 border-2 border-[#D0EEF5]",style:{boxShadow:"0px -3px 4px 0px #FFFFFF40, -3px 0px 4px 0px #FFFFFF40"},children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-center mb-2 text-[#01626F] font-lilitaone",children:"Join Game"}),(0,t.jsxs)("p",{className:"text-center text-[#6CA0A7] mb-6 text-lg",children:["Player ",r]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-[#01626F] font-semibold mb-2 text-lg font-lilitaone",children:"Enter your nickname:"}),(0,t.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&!o&&m(),placeholder:"e.g., CardMaster",className:"w-full px-4 py-3 border-2 border-[#D0EEF5] bg-[#B8F7FF03] rounded-lg focus:outline-none focus:border-[#0FB6C6] text-lg text-[#01626F] placeholder:text-[#6CA0A7]",disabled:o,maxLength:20,autoFocus:!0,style:{boxShadow:"4px 2px 5px 0px #FFFFFF40 inset, 1px -2px 5px 0px #FFFFFF4D inset"}}),(0,t.jsx)("p",{className:"text-xs text-[#6CA0A7] mt-1",children:"Max 20 characters"})]}),d&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:d}),(0,t.jsx)("button",{onClick:m,disabled:o||!s.trim(),className:"w-full bg-[#0FB6C6] hover:bg-[#0DA5B5] disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold py-4 px-6 rounded-lg text-xl transition-colors font-lilitaone",style:{boxShadow:"2.65px 1.33px 3.1px 0px #6CEDFC40 inset"},children:o?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Joining..."]}):"Join Game"})]}),(0,t.jsx)("div",{className:"absolute bottom-0 w-full h-[150px] z-10 rounded-t-[50%]",style:{background:"linear-gradient(180deg, #D4FEBC -13.12%, #85F0D9 21.68%, #19E2D5 100%)",boxShadow:"0px 12px 18px 0px #E8FABC inset"}})]})}e.s(["default",()=>r])},29530,e=>{e.v(e=>Promise.resolve().then(()=>e(13209)))}]);