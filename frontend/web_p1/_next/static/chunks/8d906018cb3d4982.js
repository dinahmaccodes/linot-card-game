(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},2551,e=>{"use strict";var t=e.i(71645);let a=`
  query PlayerView($player: String!) {
    playerView(player: $player) {
      myCards { suit value }
      myCardCount
      calledLastCard
      opponents {
        owner
        nickname
        cardCount
        isActive
        calledLastCard
      }
      topCard { suit value }
      deckSize
      currentPlayerIndex
      status
      activeShapeDemand
      pendingPenalty
    }
  }
`;function l(){let[l,r]=(0,t.useState)(null),[s,n]=(0,t.useState)(!0),[o,i]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(1);(0,t.useEffect)(()=>{e.A(29530).then(({createLineraClient:e,getGlobalConfig:t})=>{try{let a=t();m(a.playerNumber||1);let l=e();d(l)}catch(e){console.error("Config not ready yet",e)}})},[]);let x=(0,t.useCallback)(async()=>{if(c)try{let t=await e.A(29530).then(e=>e.getGlobalConfig()),l=c.getOwner(),s=await c.query(a,{player:l},t.playChain);r(s.playerView),i(null)}catch(e){console.error("Failed to fetch game state:",e),i(e)}finally{n(!1)}},[c]);(0,t.useEffect)(()=>{if(!c)return;x();let e=setInterval(x,500);return()=>clearInterval(e)},[x,c]);let h=(0,t.useCallback)(async t=>{if(c)try{let a=await e.A(29530).then(e=>e.getGlobalConfig());await c.mutate(`
          mutation JoinFromChain($hostChainId: String!, $nickname: String!) {
            joinFromChain(hostChainId: $hostChainId, nickname: $nickname)
          }
        `,{hostChainId:a.playChain,nickname:t}),await x()}catch(e){throw console.error("Failed to join game:",e),e}},[c,x]),b=(0,t.useCallback)(async()=>{if(c)try{await c.mutate("mutation { startMatch }"),await x()}catch(e){throw console.error("Failed to start game:",e),e}},[c,x]),g=(0,t.useCallback)(async(e,t)=>{if(c)try{await c.mutate(`
        mutation PlayCard($cardIndex: Int!, $chosenSuit: String) {
          playCard(cardIndex: $cardIndex, chosenSuit: $chosenSuit)
        }
      `,{cardIndex:e,chosenSuit:t}),await x()}catch(e){throw console.error("Failed to play card:",e),e}},[c,x]);return{gameState:l,loading:s,error:o,joinGame:h,startGame:b,playCard:g,drawCard:(0,t.useCallback)(async()=>{if(c)try{await c.mutate("mutation { drawCard }"),await x()}catch(e){throw console.error("Failed to draw card:",e),e}},[c,x]),callLastCard:(0,t.useCallback)(async()=>{if(c)try{await c.mutate("mutation { callLastCard }"),await x()}catch(e){throw console.error("Failed to call last card:",e),e}},[c,x]),refresh:x,playerNumber:u}}e.s(["useWhotGame",()=>l])},15452,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(18566),r=e.i(2551);function s(){let e=(0,l.useRouter)(),{gameState:s,joinGame:n,startGame:o,playerNumber:i}=(0,r.useWhotGame)(),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[p,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{let t=localStorage.getItem("linot_selected_profile");t?d(JSON.parse(t)):e.push("/profiles")},[e]);let f=async()=>{if(c){h(!0),y(null);try{console.log(`Joining game as ${c.nickname}...`),await n(c.nickname),m(!0),console.log("✓ Successfully joined game")}catch(e){console.error("Failed to join:",e),y(e.message||"Failed to join game"),h(!1)}}},F=async()=>{g(!0),y(null);try{console.log("Starting game..."),await o(),console.log("✓ Game started"),e.push(`/game/${i}`)}catch(e){console.error("Failed to start:",e),y(e.message||"Failed to start game"),g(!1)}};return(0,t.jsxs)("main",{className:"min-h-screen w-full relative overflow-hidden flex flex-col items-center justify-center",style:{background:"linear-gradient(180deg, #77F0FC 0%, #19D3F9 100%)"},children:[(0,t.jsx)("img",{src:"/water-bubbles.svg",className:"absolute z-3 top-0 left-[150px] animate-bubbles animation-delay-2000",alt:""}),(0,t.jsx)("img",{src:"/sea-walls.png",className:"absolute z-3 top-0 left-0",alt:""}),(0,t.jsx)("img",{src:"/reflection-lights.svg",className:"absolute z-3 top-0 left-0 animate-shimmer",alt:""}),(0,t.jsxs)("div",{className:"relative z-20 bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-2xl w-full mx-4 border-2 border-[#D0EEF5]",style:{boxShadow:"0px -3px 4px 0px #FFFFFF40, -3px 0px 4px 0px #FFFFFF40"},children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-[#01626F] mb-6 text-center font-lilitaone",children:"Game Lobby"}),c&&(0,t.jsxs)("div",{className:"mb-8 p-6 bg-[#B8F7FF03] rounded-lg border-2 border-[#D0EEF5]",children:[(0,t.jsx)("p",{className:"text-lg text-[#6CA0A7] mb-1",children:"Playing as:"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-[#01626F]",children:c.nickname}),(0,t.jsxs)("p",{className:"text-sm text-[#6CA0A7] mt-2",children:["Player ",i]})]}),p&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:p}),u?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-6 p-4 bg-green-100 border-2 border-green-400 rounded-lg",children:(0,t.jsx)("p",{className:"text-green-700 font-bold text-xl text-center",children:"✓ Joined game!"})}),s?.opponents&&s.opponents.length>0&&(0,t.jsxs)("div",{className:"mb-6 p-6 bg-[#B8F7FF03] rounded-lg border-2 border-[#D0EEF5]",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-[#01626F] font-lilitaone",children:"Players in Lobby:"}),(0,t.jsx)("ul",{className:"space-y-2",children:s.opponents.map((e,a)=>(0,t.jsxs)("li",{className:"text-lg text-[#01626F] flex items-center",children:[(0,t.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.nickname]},a))})]}),1===i&&(0,t.jsx)("button",{onClick:F,disabled:b,className:"w-full bg-[#EA463D] hover:bg-[#D93D34] disabled:bg-gray-400 text-white font-bold py-4 px-6 rounded-lg text-2xl transition-colors font-lilitaone",style:{boxShadow:"2.65px 1.33px 3.1px 0px #FF6B6340 inset"},children:b?"Starting...":"Start Game"}),1!==i&&(0,t.jsx)("div",{className:"text-center p-4 bg-blue-100 border-2 border-blue-400 rounded-lg",children:(0,t.jsx)("p",{className:"text-blue-700 font-semibold",children:"Waiting for host to start the game..."})})]}):(0,t.jsx)("button",{onClick:f,disabled:x,className:"w-full bg-[#0FB6C6] hover:bg-[#0DA5B5] disabled:bg-gray-400 text-white font-bold py-4 px-6 rounded-lg text-2xl transition-colors font-lilitaone",style:{boxShadow:"2.65px 1.33px 3.1px 0px #6CEDFC40 inset"},children:x?"Joining...":"Join Game"})]}),(0,t.jsx)("div",{className:"absolute bottom-0 w-full h-[150px] z-10 rounded-t-[50%]",style:{background:"linear-gradient(180deg, #D4FEBC -13.12%, #85F0D9 21.68%, #19E2D5 100%)",boxShadow:"0px 12px 18px 0px #E8FABC inset"}})]})}e.s(["default",()=>s])},29530,e=>{e.v(e=>Promise.resolve().then(()=>e(13209)))}]);