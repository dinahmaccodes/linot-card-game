(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25821,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s(){return(0,t.jsxs)("div",{className:"w-64 h-48 bg-white/20 backdrop-blur-sm rounded-lg border border-white/30 p-4 flex flex-col",children:[(0,t.jsx)("h3",{className:"text-[#01626F] font-bold mb-2",children:"Live Chat"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto text-sm text-[#01626F] italic",children:(0,t.jsx)("p",{children:"Chat feature coming soon..."})})]})}function l(){return(0,t.jsx)("div",{className:"w-32 h-16 bg-[#EA463D] rounded-lg shadow-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-lilitaone text-2xl",children:"00:30"})})}function r({playerNumber:e,gameState:a}){return(0,t.jsxs)("div",{className:"w-64 bg-white/80 rounded-lg p-4 shadow-lg text-[#01626F]",children:[(0,t.jsx)("h3",{className:"font-bold mb-2",children:"Players"}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["You (P",e,")"]}),(0,t.jsxs)("span",{children:[a.myCardCount," cards"]})]}),a.opponents.map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:e.nickname}),(0,t.jsxs)("span",{children:[e.cardCount," cards"]})]},a))]})}function n({deckSize:e,onDraw:a}){return(0,t.jsx)("div",{className:"w-32 h-44 bg-[#01626F] rounded-xl border-4 border-white flex items-center justify-center cursor-pointer shadow-xl transform transition active:scale-95",onClick:a,children:(0,t.jsxs)("div",{className:"text-white text-center",children:[(0,t.jsx)("p",{className:"font-lilitaone text-xl",children:"DRAW"}),(0,t.jsxs)("p",{className:"font-bold text-sm",children:[e," Cards"]})]})})}function i({opponent:e,topCard:a}){return e?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-[#01626F] text-white px-6 py-2 rounded-full font-bold shadow-lg",children:e.nickname}),(0,t.jsxs)("div",{className:"flex gap-2",children:[Array.from({length:Math.min(e.cardCount,5)}).map((e,a)=>(0,t.jsx)("div",{className:"w-16 h-24 bg-blue-800 rounded-lg border-2 border-white shadow-md"},a)),e.cardCount>5&&(0,t.jsxs)("div",{className:"w-16 h-24 flex items-center justify-center text-[#01626F] font-bold",children:["+",e.cardCount-5]})]})]}):(0,t.jsx)("div",{className:"h-32"})}function c({myCards:e,isMyTurn:a,onPlayCard:s,onDrawCard:l,onCallLastCard:r}){return(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[a&&(0,t.jsx)("div",{className:"text-xl text-[#EA463D] font-bold animate-bounce",children:"YOUR TURN!"}),(0,t.jsx)("div",{className:"flex flex-wrap justify-center gap-[-40px]",children:e.map((e,l)=>(0,t.jsxs)("div",{onClick:()=>a&&s(l),className:`w-24 h-36 bg-white rounded-xl border-2 border-gray-200 shadow-xl flex flex-col items-center justify-center cursor-pointer hover:-translate-y-4 transition-transform ${!a&&"opacity-70 cursor-not-allowed"}`,style:{marginLeft:l>0?"-40px":"0"},children:[(0,t.jsx)("span",{className:`text-3xl font-bold ${(e=>{switch(e?.toUpperCase()){case"CIRCLE":return"text-red-500";case"TRIANGLE":return"text-green-500";case"CROSS":return"text-blue-500";case"SQUARE":return"text-orange-500";case"STAR":return"text-purple-500";default:return"text-black"}})(e.suit)}`,children:e.value}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:e.suit})]},l))}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)("button",{onClick:r,className:"px-6 py-2 bg-[#EA463D] text-white rounded-full font-bold shadow-lg hover:bg-[#d63a32] transition",children:"LAST CARD!"})})]})}let o=`
  query PlayerView($player: String!) {
    playerView(player: $player) {
      myCards { suit value }
      myCardCount
      calledLastCard
      opponents {
        owner
        nickname
        cardCount
        isActive
        calledLastCard
      }
      topCard { suit value }
      deckSize
      currentPlayerIndex
      status
      activeShapeDemand
      pendingPenalty
    }
  }
`;function d(){let{gameState:d,loading:x,error:h,joinGame:m,startGame:u,playCard:p,drawCard:f,callLastCard:g,playerNumber:y}=function(){let[t,s]=(0,a.useState)(null),[l,r]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[x,h]=(0,a.useState)(1);(0,a.useEffect)(()=>{e.A(29530).then(({createLineraClient:e,getGlobalConfig:t})=>{try{let a=t();h(a.playerNumber||1);let s=e();d(s)}catch(e){console.error("Config not ready yet",e)}})},[]);let m=(0,a.useCallback)(async()=>{if(c)try{let t=await e.A(29530).then(e=>e.getGlobalConfig()),a=c.getOwner(),l=await c.query(o,{player:a},t.playChain);s(l.playerView),i(null)}catch(e){console.error("Failed to fetch game state:",e),i(e)}finally{r(!1)}},[c]);(0,a.useEffect)(()=>{if(!c)return;m();let e=setInterval(m,500);return()=>clearInterval(e)},[m,c]);let u=(0,a.useCallback)(async t=>{if(c)try{let a=await e.A(29530).then(e=>e.getGlobalConfig());await c.getChainId()===a.playChain?await c.mutate(`
            mutation JoinMatch($nickname: String!) {
              joinMatch(nickname: $nickname)
            }
          `,{nickname:t}):await c.mutate(`
            mutation JoinFromChain($hostChainId: String!, $nickname: String!) {
              joinFromChain(hostChainId: $hostChainId, nickname: $nickname)
            }
          `,{hostChainId:a.playChain,nickname:t}),await m()}catch(e){throw console.error("Failed to join game:",e),e}},[c,m]),p=(0,a.useCallback)(async()=>{if(c)try{await c.mutate("mutation { startMatch }"),await m()}catch(e){throw console.error("Failed to start game:",e),e}},[c,m]),f=(0,a.useCallback)(async(e,t)=>{if(c)try{await c.mutate(`
        mutation PlayCard($cardIndex: Int!, $chosenSuit: String) {
          playCard(cardIndex: $cardIndex, chosenSuit: $chosenSuit)
        }
      `,{cardIndex:e,chosenSuit:t}),await m()}catch(e){throw console.error("Failed to play card:",e),e}},[c,m]);return{gameState:t,loading:l,error:n,joinGame:u,startGame:p,playCard:f,drawCard:(0,a.useCallback)(async()=>{if(c)try{await c.mutate("mutation { drawCard }"),await m()}catch(e){throw console.error("Failed to draw card:",e),e}},[c,m]),callLastCard:(0,a.useCallback)(async()=>{if(c)try{await c.mutate("mutation { callLastCard }"),await m()}catch(e){throw console.error("Failed to call last card:",e),e}},[c,m]),refresh:m,playerNumber:x}}(),[b,j]=(0,a.useState)("");return((0,a.useEffect)(()=>{let e=localStorage.getItem(`whot_player_profile_${y}`);if(e)try{let t=JSON.parse(e);t.username&&j(t.username)}catch(e){console.error("Failed to parse profile",e)}},[y]),x)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#77F0FC]",children:(0,t.jsx)("p",{className:"text-3xl font-lilitaone text-[#01626F] animate-pulse",children:"Loading game..."})}):h?(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center flex-col gap-4 bg-[#77F0FC]",children:[(0,t.jsx)("p",{className:"text-2xl text-red-600 font-bold",children:"Connection Error"}),(0,t.jsx)("p",{className:"text-[#01626F]",children:h.message}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-[#0FB6C6] text-white rounded-lg",children:"Retry"})]}):d?"WAITING"===d.status.toUpperCase()?(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-[#77F0FC] to-[#19D3F9]",children:(0,t.jsxs)("div",{className:"bg-white/30 backdrop-blur-md p-10 rounded-2xl shadow-xl flex flex-col items-center gap-6 w-[500px]",children:[(0,t.jsx)("h1",{className:"text-4xl font-lilitaone text-[#01626F]",children:"Lobby"}),(0,t.jsxs)("div",{className:"w-full bg-white/50 rounded-lg p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-[#01626F] mb-2",children:"Players Joined:"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[d.opponents.map((e,a)=>(0,t.jsxs)("li",{className:"flex justify-between items-center text-[#01626F]",children:[(0,t.jsx)("span",{children:e.nickname||"Unknown"}),(0,t.jsx)("span",{className:"bg-green-400 text-white text-xs px-2 py-1 rounded-full",children:"Ready"})]},a)),(0,t.jsxs)("li",{className:"flex justify-between items-center text-[#01626F] font-bold",children:[(0,t.jsxs)("span",{children:["You (Player ",y,")"]}),(0,t.jsx)("span",{className:"bg-green-400 text-white text-xs px-2 py-1 rounded-full",children:"Ready"})]})]})]}),1===y?(0,t.jsx)("button",{onClick:()=>u(),disabled:d.opponents.length<1,className:`px-8 py-4 text-white text-2xl font-lilitaone rounded-full shadow-lg transform transition ${d.opponents.length<1?"bg-gray-400 cursor-not-allowed":"bg-[#EA463D] hover:bg-[#d63a32] active:scale-95"}`,children:"Start Match"}):(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-lg text-[#01626F] animate-pulse font-bold",children:"Waiting for host to start..."})})]})}):(0,t.jsxs)("div",{className:"min-h-screen w-full relative overflow-hidden flex gap-x-[50px] px-5 bg-gradient-to-b from-[#77F0FC] to-[#19D3F9]",children:[(0,t.jsxs)("div",{className:"space-y-12 pt-10",children:[(0,t.jsx)(s,{}),(0,t.jsx)(l,{})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-20 pt-10",children:[(0,t.jsx)(i,{opponent:d.opponents[0],topCard:d.topCard}),(0,t.jsx)("img",{src:"/middle-cards.png",className:"mx-auto",alt:""}),(0,t.jsx)(c,{myCards:d.myCards,isMyTurn:d.currentPlayerIndex===y-1,onPlayCard:e=>p(e),onDrawCard:f,onCallLastCard:g})]}),(0,t.jsxs)("div",{className:"space-y-[46px]",children:[(0,t.jsx)(r,{playerNumber:y,gameState:d}),(0,t.jsx)(n,{deckSize:d.deckSize,onDraw:f})]})]}):(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-[#77F0FC] to-[#19D3F9]",children:(0,t.jsxs)("div",{className:"bg-white/30 backdrop-blur-md p-10 rounded-2xl shadow-xl flex flex-col items-center gap-6 border border-white/50",children:[(0,t.jsxs)("h1",{className:"text-4xl font-lilitaone text-[#01626F]",children:["Welcome ",b||`Player ${y}`]}),(0,t.jsx)("p",{className:"text-[#01626F] text-lg",children:"Connect to the game server to start playing."}),(0,t.jsx)("button",{onClick:()=>m(b||`Player ${y}`),className:"px-8 py-4 bg-[#EA463D] hover:bg-[#d63a32] text-white text-2xl font-lilitaone rounded-full shadow-lg transform transition active:scale-95",children:"Join Game"})]})})}e.s(["default",()=>d],25821)},29530,e=>{e.v(e=>Promise.resolve().then(()=>e(13209)))}]);